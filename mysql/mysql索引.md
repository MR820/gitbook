### Btree索引和Hash索引
索引在存储引擎层实现
**B-tree索引的特点：**
- 以B+树的结构存储数据
![](https://oss.wyxxt.org.cn/images/2021/09/18/13d18029d6867d3a529be0449fab01f2.png)
- B-tree索引能够加快数据的查询速度
- B-tree索引更适合进行范围查找

**B-tree索引使用：**
- 全值匹配的查询
order_sn = '9876129900'
- 匹配最左前缀的查询(联合索引)
- 匹配列前缀查询
order_sn like '9876%'
- 匹配范围值的查找
order_sn>'9876119900' and order_sn<'9876119999'
- 精确匹配左前列并范围匹配另外一列（联合索引）
- 只访问索引的查询（覆盖索引）

**B-tree索引的限制：**
- 如果不是按照索引的最左列开始查找的，则无法使用索引
- 使用索引时不能跳过索引中左边的列
- Not in和<>操作无法使用索引
- 如果查询中有某个列的范围查询，则其右边所有列都无法使用所用

**Hash索引的特点：**
- Hash索引是基于Hash表实现的，只有查询条件精确匹配Hash索引中所有列时，才能够使用到hash索引
- 对于Hash索引中的所有列，存储引擎都会为每一行计算一个Hash码，Hash索引存储的就是Hash码

**Hash索引的限制**
- Hash索引必须进行二次查找
- Hash索引无法用于排序
- Hash索引不支持部分索引查找也不支持范围查找
- Hash索引中Hash码的计算可能存在Hash冲突

### 为什么使用索引
- 索引大大减少了存储引擎需要扫描的数据量
- 索引可以帮助我们进行排序以避免使用临时表
- 索引可以把随机I/O变为顺序I/O

### 索引是不是越多越好
- 索引会增加写操作的成本
- 太多的索引会增加查询优化器的选择时间