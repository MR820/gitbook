## 物理图



![image-20231222183407085](https://oss.wyxxt.org.cn/images/2023/12/22/ddaad852-ee8e-4057-b85c-511851a0f7ca.png)

shell执行./hello的过程

键盘输入指令，回车shell知道我们已经结束了命令的输入。键盘输入通过I/O总线到寄存器文件，触发**I/O中断**。

shell执行一系列指令，这些指令将hello目标文件中的代码和数据从磁盘拷贝到主存，从而加载hello文件。数据包括最终会被输出的字符串“hello，world\n”

利用DMA（直接存储器存取）的技术，数据可以不通过处理器而直接从磁盘到达主存。

一旦hello目标文件中的代码和数据被加载到了存储器，处理器就开始执行hello程序的主程序中的机器语言指令。这些指令将“hello，world\n”串中的字节从存储器中拷贝到寄存器文件，再从寄存器文件中拷贝到显示设备，最终显示在屏幕上。

## 高速缓存

通过，上面的简单事例。我们知道，系统花费了大量时间把信息从一个地方挪到另一个地方。hello程序的机器指令最初存放在磁盘上。当程序加载时，它们被拷贝到主存。当处理器运行程序时，指令又从主存拷贝到处理器。相似地，数据串“hello，world/n”开始时在磁盘上，再被拷贝到主存，然后从主存拷贝到显示设备。从一个程序员的角度来看，大量的拷贝减慢了程序的实际工作。因此，系统设计者的一个主要目标就是使这些拷贝操作尽可能的快。

根据机械原理，较大的存储设备要比较小的存储设备运行的得慢。而快速设备的造价远高于低速设备。

高速缓存，存放处理器在将来不久可能会用到的数据。

一个典型的高速缓存存储器。位于处理器芯片上的L1高速缓存的容量可以达到数万个字节，访问速度几乎和访问寄存器的文件一样。一个容量为数十万到数百万的更大的L2高速缓存是通过一条特殊的总线连接到处理器的。访问L2的开销要比访问L1的开销大5倍，但是仍然比访问主存的时间快5～10倍。L1和L2高速缓存是一种叫做静态随机访问存储器的硬件技术实现的。

![image-20231222190316774](https://oss.wyxxt.org.cn/images/2023/12/22/868facc3-c5bc-4daf-b373-065c1a57e16e.png)

形成层次结构的存储设备

在处理器和一个较大较慢的设备（例如主存）之间插入一个更小、更快的存储设备（比如高速缓存）的想法成为一个普遍观念。

![image-20231222190555674](https://oss.wyxxt.org.cn/images/2023/12/22/14896fb1-eb34-4e98-bd2d-8cf39bf37de7.png)